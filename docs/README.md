# Talk Diary

카카오톡의 실시간 채팅과 **톡다이어리** 기능을 제공하는 웹 애플리케이션입니다.

## 프로젝트 개요

하루하루 흘러가는 채팅 속에서 그날의 의미를 발견하고 기록할 수 있는 서비스입니다.

카카오톡의 실시간 채팅 기능을 제공하면서, 사용자가 참여한 대화들을 바탕으로 하루를 돌아볼 수 있는 **톡다이어리**를 생성합니다.

### 핵심 가치

- **익숙함**: 카카오톡 스타일의 직관적인 채팅 경험
- **회고**: 매일의 대화를 의미 있는 기록으로 전환
- **발견**: 흘러가는 일상 속에서 놓치기 쉬운 순간들을 포착

### 주요 기능

| 기능           | 설명                                                   |
| -------------- | ------------------------------------------------------ |
| 실시간 채팅    | 카카오톡 스타일의 그룹 채팅                            |
| 톡다이어리     | AI가 생성한 하루 요약 리포트를 받아보는 전용 채팅방    |
| 리포트 카드    | 데일리 요약, 특별한 대화, AI 이미지 (3장 캐러셀)       |
| 톡다이어리 홈탭 | 감정 캘린더, 티키타카 랭킹, 키워드 컬렉션, AI 갤러리   |
| 톡다이어리 리포트탭 | 주별 캘린더, 날짜별 리포트 상세 조회                |

---

## 문서 구조

| 문서                             | 설명                     |
| -------------------------------- | ------------------------ |
| [TECH_STACK.md](./TECH_STACK.md) | 기술 스택 및 선택 이유   |
| [FEATURES.md](./FEATURES.md)     | 기능 상세 명세           |
| [DATABASE.md](./DATABASE.md)     | 데이터베이스 스키마 설계 |
| [API.md](./API.md)               | Supabase API 사용        |

---

## 빠른 시작

```bash
# 의존성 설치
npm install

# 환경 변수 설정
cp .env.example .env.local
# .env.local에 Supabase URL과 Key 입력

# 개발 서버 실행
npm run dev
```

---

## 프로젝트 구조

```
talk-diary/
├── app/                    # Next.js App Router
│   ├── layout.tsx          # 루트 레이아웃
│   ├── page.tsx            # 메인 페이지 (뷰 상태 관리)
│   ├── icon.png            # 파비콘
│   └── globals.css         # 전역 스타일 (카카오 테마 색상, 커스텀 스크롤바)
├── components/             # React 컴포넌트
│   ├── login-form.tsx      # 로그인 폼
│   ├── chat-list.tsx       # 채팅 목록 (톡다이어리 포함)
│   ├── chat-room.tsx       # 채팅방
│   ├── talk-diary-page.tsx # 톡다이어리 채팅방 페이지
│   ├── talk-diary-notification.tsx # 톡다이어리 알림
│   ├── report-card.tsx     # 리포트 카드 UI (3장 캐러셀)
│   ├── bottom-nav.tsx      # 하단 네비게이션
│   ├── archive-page.tsx    # 톡다이어리 전체보기 (TalkDiary 래퍼)
│   └── talk-diary/         # 톡다이어리 전체보기 컴포넌트
│       ├── index.tsx       # 메인 컨테이너 (홈/리포트 탭)
│       ├── home-tab.tsx    # 홈탭 (캘린더, 랭킹, 키워드, 갤러리)
│       └── report-tab.tsx  # 리포트탭 (주별 캘린더, 리포트 상세)
├── lib/                    # 유틸리티
│   ├── utils.ts            # 헬퍼 함수
│   ├── supabase.ts         # Supabase 클라이언트 + 세션 관리
│   └── mock-data.ts        # UI 개발용 Mock 데이터
├── types/                  # TypeScript 타입 정의
│   └── database.ts         # DB 테이블 타입 + 톡다이어리 콘텐츠 타입
├── docs/                   # 프로젝트 문서
└── public/                 # 정적 파일
    └── dairy_profile.png   # 톡다이어리 프로필 이미지
```

---

## 구현 범위

### 채팅 기능 (완료)

- 이름.확장자 로그인 (예: `liam.gg`)
- 채팅방 생성 및 참여
- 실시간 텍스트 메시지 송수신
- 읽지 않은 메시지 표시
- 날짜 pill 표시
- 커스텀 스크롤바

### 톡다이어리 기능 (완료)

- **톡다이어리 채팅방**: 채팅 목록 최상단에 고정 표시
- **리포트 카드 UI**: 3장 캐러셀 (데일리 요약, 특별한 대화, AI 이미지)
- **톡다이어리 알림**: 새 리포트 도착 시 상단 푸시 알림 스타일 표시
- **Supabase Realtime**: 새 리포트 도착 시 실시간 알림

### 톡다이어리 전체보기 (완료)

- **홈탭**
  - 월별 감정 캘린더 (좌우 네비게이션, 오늘 날짜 강조)
  - 이달의 티키타카 랭킹 (최대 3명, 메달 아이콘)
  - 키워드 컬렉션 (랜덤 10개, 이모지 포함)
  - AI 갤러리 (3초 크로스페이드 슬라이드쇼)

- **리포트탭**
  - 주별 캘린더 (좌우 네비게이션, 선택 날짜 강조)
  - 데일리 요약 (키워드, 감정 날씨, 티키타카)
  - 특별한 대화 (채팅방 이동 가능)
  - AI 갤러리

### 톡다이어리 콘텐츠 구조

| 항목              | 설명                                          |
| ----------------- | --------------------------------------------- |
| 데일리 요약       | 타이틀, 요약 문구, 키워드, 감정 날씨, 티키타카 |
| 특별한 대화       | 키워드 태그, 제목, 미리보기, 발신자 (채팅방 이동 가능) |
| AI 이미지         | AI가 생성한 하루 대표 이미지, 다운로드 가능   |

### 리포트 생성 흐름

- AI 서버에서 자동으로 리포트 생성 후 Supabase DB에 저장
- 클라이언트는 DB에서 리포트를 조회하여 UI 구성 (AI 서버 직접 호출 없음)
- Supabase Realtime으로 새 리포트 도착 감지 및 알림

---

## 구현 제외

- 이메일/비밀번호 인증
- 이미지/파일 전송
- 프로필 이미지 수정
- 푸시 알림 (웹 푸시)
- 일기 직접 작성
